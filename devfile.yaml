schemaVersion: 2.2.0
metadata:
  name: systemd-nested
components:
  - name: universal-developer-image
    container:
      image: registry.redhat.io/devspaces/udi-rhel9:latest
      command: ['/sbin/init']
      env:
        - name: KUBEDOCK_ENABLED
          value: "false"
      # We define the mount point here
      volumeMounts:
        - name: cgroups-host
          path: /sys/fs/cgroup
  - name: cgroups-host
    volume: {} # This satisfies the schema requirement for a volume component
attributes:
  # Global overrides that apply to the entire Pod/Deployment
  pod-overrides:
    spec:
      containers:
        - name: universal-developer-image
          securityContext:
            privileged: true
            runAsUser: 0
            runAsNonRoot: false
      volumes:
        - name: cgroups-host
          hostPath:
            path: /sys/fs/cgroup
            type: Directory
